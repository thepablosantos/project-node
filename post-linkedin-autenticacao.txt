Ol√°, rede! ü´°

Continuando a evolu√ß√£o da nossa API REST!

No post anterior, mostrei como implementei funcionalidades de busca e consulta de v√≠deos. Agora, adicionei seguran√ßa e boas pr√°ticas essenciais para uma API em produ√ß√£o!

- Nova Funcionalidade: Sistema de Autentica√ß√£o JWT

Implementei um middleware de autentica√ß√£o usando JSON Web Tokens (JWT). O middleware `login` verifica o token enviado no header `Authorization` de cada requisi√ß√£o protegida. Quando o usu√°rio faz login atrav√©s da rota `/user/sign-in`, recebe um token JWT v√°lido por 1 hora, que deve ser enviado nas requisi√ß√µes subsequentes.

- Prote√ß√£o de Rotas com Middleware

Apliquei o middleware de autentica√ß√£o nas rotas de v√≠deos que requerem autentica√ß√£o. As rotas `/videos/create-video` e `/videos/get-videos` agora est√£o protegidas, garantindo que apenas usu√°rios autenticados possam criar ou listar v√≠deos. A implementa√ß√£o √© flex√≠vel: podemos facilmente adicionar ou remover prote√ß√£o em qualquer rota!

- Seguran√ßa com Vari√°veis de Ambiente

Migrei todas as configura√ß√µes sens√≠veis para vari√°veis de ambiente usando o pacote `dotenv`. Agora, credenciais do banco de dados (usu√°rio, senha, host, porta), nome do banco e a chave secreta do JWT est√£o armazenadas no arquivo `.env`, que n√£o √© versionado no Git. Isso garante que informa√ß√µes sens√≠veis n√£o sejam expostas no c√≥digo!

- Organiza√ß√£o e Padr√µes

O middleware foi organizado na pasta `middleware/`, seguindo a estrutura do projeto. A verifica√ß√£o do token √© feita de forma centralizada, facilitando manuten√ß√£o e reutiliza√ß√£o. O c√≥digo mant√©m a separa√ß√£o de responsabilidades, com o middleware cuidando da autentica√ß√£o e as rotas focadas na l√≥gica de neg√≥cio!

- Valida√ß√£o e Testes

Testei todas as implementa√ß√µes com Postman, validando:
Gera√ß√£o de token JWT no login
Prote√ß√£o de rotas com middleware
Rejei√ß√£o de requisi√ß√µes sem token ou com token inv√°lido
Carregamento correto das vari√°veis de ambiente
Funcionamento adequado de todas as rotas protegidas

A API est√° cada vez mais robusta e pronta para produ√ß√£o! Cada nova feature segue os mesmos padr√µes de seguran√ßa e organiza√ß√£o, facilitando a manuten√ß√£o e evolu√ß√£o do projeto.

Em breve, pretendo publicar o projeto completo com documenta√ß√£o e c√≥digo aberto! üöÄ

Acesse meu portfolio: https://lnkd.in/gPumFJ4G

